:root{
  --bg:#f2d9cf;
  --text:#544e4c;
  --accent:#ff6d57;
  --accent-2:#ffcd4b;
  --accent-3:#8f84ff;
  --muted:#f6f6f8;
  --muted-2:#eceff2;
  --ring:rgba(0,0,0,.08);
  --cake-dark:#6f594b;
  --cake-mid:#a88571;
  --cream:#f3f1ee;
  --plate:#ffffff;
  --flame:#ffab1a;
  --flame-core:#ffe36b;
  --radius-xs:8px;
  --radius-sm:12px;
  --radius-md:14px;
  --radius-lg:16px;
  --radius-xl:18px;
  --radius-2xl:22px;
  --blur:8px;
  --shadow-soft:0 10px 30px rgba(0,0,0,.12);
  --shadow-1:0 1px 0 rgba(0,0,0,.06);
  --shadow-2:0 6px 18px rgba(0,0,0,.08);
  --shadow-3:0 12px 42px rgba(0,0,0,.14);
  --fs-title:clamp(20px,3vw,28px);
  --fs-name:clamp(22px,3.6vw,32px);
  --fs-ui:14px;
  --toolbar-h:56px;
  --gap-xs:6px;
  --gap-sm:8px;
  --gap-md:10px;
  --gap-lg:12px;
  --gap-xl:14px;
  --gap-2xl:18px;
}
:root.theme-mint{
  --bg:#dceedf;
  --text:#2c5650;
  --accent:#1fb79a;
  --accent-2:#6bcbef;
  --accent-3:#ffd93d;
  --cake-dark:#536f63;
  --cake-mid:#8fb6a3;
  --cream:#f7f6f4;
  --plate:#ffffff;
}
:root.theme-night{
  --bg:#141628;
  --text:#ebeaf4;
  --accent:#8f84ff;
  --accent-2:#ffd93d;
  --accent-3:#6bcbef;
  --muted:#1c1f34;
  --muted-2:#2a2e4a;
  --plate:#ffffff33;
}
*{
  box-sizing:border-box;
  min-width:0;
}
html,body{
  height:100%;
}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  line-height:1.2;
  text-rendering:optimizeLegibility;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow-x:hidden;
}
button,select,input{
  font-family:inherit;
  font-size:var(--fs-ui);
}
a{
  color:inherit;
  text-decoration:none;
}
img,svg,video,canvas{
  display:block;
  max-width:100%;
}
.container{
  width:min(92vw,1100px);
  margin-left:auto;
  margin-right:auto;
}
.toolbar{
  position:fixed;
  top:8px;
  left:8px;
  right:8px;
  z-index:30;
  display:grid;
  grid-template-columns:auto 1fr;
  gap:10px;
  align-items:start;
}
.toolbar-toggle{
  background:#fff;
  border:none;
  border-radius:999px;
  padding:10px 14px;
  font-weight:800;
  cursor:pointer;
  box-shadow:var(--shadow-1);
}
.toolbar-tray{
  background:#fff;
  border-radius:999px;
  display:grid;
  grid-template-columns:1fr auto 1fr;
  align-items:center;
  gap:12px;
  padding:8px 12px;
  box-shadow:var(--shadow-1);
  max-height:120px;
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
  transition:max-height .25s ease,opacity .25s ease,transform .25s ease;
  will-change:max-height,opacity,transform;
}
.toolbar.collapsed .toolbar-tray{
  max-height:0;
  opacity:0;
  transform:translateY(-8px);
  pointer-events:none;
  overflow:hidden;
}
.tray-left{
  display:flex;
  gap:10px;
  align-items:center;
}
.tray-center{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:center;
}
.tray-right{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:flex-end;
}
.toolbar button{
  background:#fff;
  border:none;
  border-radius:999px;
  padding:10px 14px;
  font-weight:700;
  cursor:pointer;
  box-shadow:var(--shadow-1);
}
.toolbar select{
  background:#fff;
  border:none;
  border-radius:999px;
  padding:10px 14px;
  font-weight:700;
  cursor:pointer;
  box-shadow:var(--shadow-1);
  appearance:none;
}
.toolbar button:focus-visible,
.toolbar select:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.theme-switch button.active{
  outline:2px solid var(--accent);
}
#balloonBtn.active{
  outline:2px solid var(--accent);
}
.stage{
  min-height:100dvh;
  display:grid;
  place-items:center;
  padding:clamp(6px,1.6vw,18px);
}
.card{
  width:min(92vw,880px);
  display:flex;
  flex-direction:column;
  align-items:center;
  row-gap:0;
  text-align:center;
}
.cake-svg{
  width:clamp(260px,48vw,620px);
  aspect-ratio:320/240;
  position:relative;
  margin:0;
}
.cake-svg svg{
  overflow:visible;
}
#plate{
  fill:var(--plate);
  opacity:0;
  transform:scaleX(.85);
  animation:plateIn .35s ease-out .15s forwards;
}
@keyframes plateIn{
  to{
    opacity:1;
    transform:scaleX(1);
  }
}
.layer{
  rx:10;
  opacity:0;
  transform:translateY(-120vh);
  animation:layerDrop .7s cubic-bezier(.2,.9,.2,1.05) forwards;
  filter:drop-shadow(0 2px 0 rgba(0,0,0,.08));
}
.layer:nth-child(odd){
  fill:var(--cake-dark);
}
.layer:nth-child(even){
  fill:var(--cake-mid);
}
.layer + .layer{
  paint-order:stroke fill;
  stroke:rgba(0,0,0,.04);
  stroke-width:.6;
}
@keyframes layerDrop{
  0%{
    opacity:0;
    transform:translateY(-120vh);
  }
  80%{
    opacity:1;
    transform:translateY(8px);
  }
  100%{
    opacity:1;
    transform:translateY(0);
  }
}
#frosting{
  opacity:0;
  transform:translateY(-24px);
  animation:frostIn .55s ease-out var(--frostDelay,.85s) forwards;
}
@keyframes frostIn{
  to{
    opacity:1;
    transform:translateY(0);
  }
}
.cream-path{
  fill:var(--cream);
  paint-order:stroke fill;
  stroke:#ffffffd0;
  stroke-width:.8;
  filter:drop-shadow(0 2px 0 rgba(0,0,0,.06));
}
#dripDots circle{
  fill:var(--cream);
  opacity:.95;
}
#candles{
  cursor:pointer;
}
.candle{
  opacity:0;
  transform:translateY(-120vh);
  animation:candleDrop .6s cubic-bezier(.2,.9,.2,1.05) forwards;
}
@keyframes candleDrop{
  0%{
    opacity:0;
    transform:translateY(-120vh);
  }
  85%{
    opacity:1;
    transform:translateY(6px);
  }
  100%{
    opacity:1;
    transform:translateY(0);
  }
}
.c-stick{
  fill:#fff;
}
.c-stripe{
  fill:#ffbac9;
}
.flame{
  fill:var(--flame);
  opacity:0;
  transform:scale(.92);
  transform-origin:center bottom;
  animation:flameOn .34s ease-out var(--flameDelay,1.1s) forwards, flk .6s ease-in-out var(--flameDelay,1.1s) infinite alternate;
}
.halo{
  fill:var(--flame-core);
  opacity:.14;
}
@keyframes flameOn{
  to{
    opacity:1;
    transform:scale(1);
  }
}
@keyframes flk{
  from{
    transform:translateX(-.5px) scale(1);
  }
  to{
    transform:translateX(.5px) scale(1.02);
  }
}
.cake-svg.blown .flame{
  animation:none;
  opacity:0;
}
.cake-svg.blown .halo{
  opacity:0;
  transition:opacity .2s;
}
.title{
  margin:0;
  font-size:var(--fs-title);
  letter-spacing:.3px;
}
.name-form {
  margin: 0;
  display: flex;
  gap: 8px;
  justify-content: center;
  flex-wrap: nowrap; 
}

.name-form input {
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #00000022;
  width: min(55vw, 260px); 
  background: #ffffffcc;
  backdrop-filter: blur(4px);
  font-size: 14px;
}

.name-form button {
  border: none;
  padding: 10px 14px;
  border-radius: 10px;
  background: var(--accent);
  color: #fff;
  font-weight: 800;
  cursor: pointer;
  min-width: 96px;
  font-size: 14px;
}

.name-form.hide {
  animation: formOut .45s ease forwards;
}

@media (max-width: 520px) {
  .name-form {
    flex-wrap: wrap;
  }
  .name-form input {
    width: min(80vw, 300px);
  }
}

@keyframes formOut{
  to{
    opacity:0;
    transform:translateY(8px);
    pointer-events:none;
  }
}
.name-text{
  height:clamp(24px,3.6vw,38px);
  margin:2px 0 0 0;
  font-weight:900;
  font-size:var(--fs-name);
  letter-spacing:.02em;
  background:linear-gradient(90deg,var(--accent),var(--accent-2),var(--accent));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  opacity:0;
  transform:translateY(0);
}
.name-text.show{
  animation:nameReveal .82s cubic-bezier(.2,.9,.2,1) forwards, shine 1.6s ease-in-out .2s 1;
}
@keyframes nameReveal{
  0%{
    opacity:0;
    letter-spacing:.18em;
  }
  60%{
    opacity:1;
  }
  100%{
    opacity:1;
    letter-spacing:.02em;
  }
}
@keyframes shine{
  0%{
    filter:drop-shadow(0 0 0 rgba(255,255,255,0));
  }
  50%{
    filter:drop-shadow(0 0 22px rgba(255,255,255,.7));
  }
  100%{
    filter:drop-shadow(0 0 0 rgba(255,255,255,0));
  }
}
.controls{
  position:fixed;
  top:calc(var(--toolbar-h) + 10px);
  left:12px;
  z-index:20;
  width:auto;
  max-width:min(88vw,1100px);
  background:#ffffffee;
  backdrop-filter:blur(var(--blur));
  border-radius:999px;
  box-shadow:var(--shadow-2);
  color:#273046;
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 12px;
}
.controls.hidden{
  display:none;
}
.controls-header{
  display:flex;
  align-items:center;
  gap:8px;
  padding:0;
  font-weight:800;
}
.controls-header #controlsTitle{
  margin-left:6px;
}
.controls-header button{
  border:none;
  background:#f3f4f6;
  padding:6px 10px;
  border-radius:12px;
  cursor:pointer;
}
.controls.collapsed .grid,
.controls.collapsed .actions{
  display:none;
}
.controls.collapsed .controls-header button{
  transform:rotate(180deg);
}
.grid{
  display:flex;
  align-items:center;
  gap:12px;
  padding:0;
  margin:0 6px 0 10px;
  overflow-x:auto;
  overflow-y:hidden;
  scrollbar-width:thin;
}
.grid::-webkit-scrollbar{
  height:6px;
}
.grid::-webkit-scrollbar-thumb{
  background:#e3e5e8;
  border-radius:999px;
}
.row{
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  background:#fafbfc;
  border:1px solid #eceff2;
  border-radius:14px;
  flex:0 0 auto;
}
.row label{
  font-weight:700;
  font-size:12px;
  opacity:.9;
}
.row input[type="range"]{
  width:160px;
}
.row span{
  width:24px;
  text-align:right;
  font-variant-numeric:tabular-nums;
}
.row.colors{
  background:transparent;
  border:none;
  padding:0;
  gap:10px;
}
.row.colors label{
  background:#fafbfc;
  border:1px solid #eceff2;
  padding:6px 10px;
  border-radius:14px;
}
.row.colors input{
  width:36px;
  height:28px;
  padding:0;
  border:none;
  background:#fff;
  border-radius:8px;
  box-shadow:var(--shadow-1);
}
.actions{
  display:flex;
  gap:8px;
  padding:0;
  margin-left:6px;
}
.actions button{
  border:none;
  padding:8px 12px;
  border-radius:14px;
  cursor:pointer;
  font-weight:700;
}
#randBtn{
  background:#eef7ff;
}
#resetBtn{
  background:#ffeef0;
}
.confetti{
  position:fixed;
  top:0;
  z-index:9;
  pointer-events:none;
  will-change:transform,opacity;
}
.from-left{
  left:-12px;
  animation:confLeft var(--t) linear forwards;
}
.from-right{
  right:-12px;
  animation:confRight var(--t) linear forwards;
}
@keyframes confLeft{
  0%{
    transform:translate(-20px,var(--y)) rotate(0);
  }
  100%{
    transform:translate(110vw,calc(var(--y) + 34vh)) rotate(720deg);
    opacity:0;
  }
}
@keyframes confRight{
  0%{
    transform:translate(20px,var(--y)) rotate(0);
  }
  100%{
    transform:translate(-110vw,calc(var(--y) + 34vh)) rotate(-720deg);
    opacity:0;
  }
}
#balloonLayer{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:5;
}
.balloon{
  position:fixed;
  left:var(--x,50vw);
  bottom:-90px;
  width:28px;
  height:36px;
  border-radius:50% 50% 48% 52%/60% 60% 40% 40%;
  background:#ffd93d;
  box-shadow:inset -6px -8px 0 0 rgba(0,0,0,.08);
  animation:floatUp var(--b-time) linear forwards;
}
.balloon::after{
  content:"";
  position:absolute;
  left:50%;
  top:100%;
  transform:translateX(-50%);
  width:2px;
  height:60px;
  background:rgba(0,0,0,.2);
}
@keyframes floatUp{
  0%{
    transform:translate(0,0);
  }
  100%{
    transform:translate(var(--dx), -110vh);
  }
}
body.celebrating #controls{
  display:none;
}
body.reels{
  height:100dvh;
  overflow:hidden;
}
.reels .card{
  transform:scale(1.12);
}
body.png-export .name-text{
  background:none !important;
  color:var(--text) !important;
}
.u-flex{
  display:flex;
}
.u-center{
  display:grid;
  place-items:center;
}
.u-col{
  display:flex;
  flex-direction:column;
}
.u-row{
  display:flex;
  flex-direction:row;
}
.u-wrap{
  flex-wrap:wrap;
}
.u-gap-4{
  gap:4px;
}
.u-gap-6{
  gap:6px;
}
.u-gap-8{
  gap:8px;
}
.u-gap-10{
  gap:10px;
}
.u-gap-12{
  gap:12px;
}
.u-p-4{
  padding:4px;
}
.u-p-6{
  padding:6px;
}
.u-p-8{
  padding:8px;
}
.u-p-10{
  padding:10px;
}
.u-px-10{
  padding-left:10px;
  padding-right:10px;
}
.u-py-10{
  padding-top:10px;
  padding-bottom:10px;
}
.u-rounded{
  border-radius:12px;
}
.u-pill{
  border-radius:999px;
}
.u-shadow-1{
  box-shadow:var(--shadow-1);
}
.u-shadow-2{
  box-shadow:var(--shadow-2);
}
.u-shadow-3{
  box-shadow:var(--shadow-3);
}
.u-muted{
  background:var(--muted);
}
.u-muted-2{
  background:var(--muted-2);
}
.u-ring{
  box-shadow:0 0 0 2px var(--ring) inset;
}
.fade-in{
  animation:fadeIn .25s ease both;
}
.fade-out{
  animation:fadeOut .25s ease both;
}
@keyframes fadeIn{
  from{
    opacity:0;
    transform:translateY(4px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}
@keyframes fadeOut{
  from{
    opacity:1;
    transform:translateY(0);
  }
  to{
    opacity:0;
    transform:translateY(4px);
  }
}
.scale-in{
  animation:scaleIn .25s ease both;
}
@keyframes scaleIn{
  from{
    opacity:.8;
    transform:scale(.96);
  }
  to{
    opacity:1;
    transform:scale(1);
  }
}
.slide-up{
  animation:slideUp .35s cubic-bezier(.2,.8,.2,1) both;
}
@keyframes slideUp{
  from{
    opacity:0;
    transform:translateY(18px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:10px 14px;
  border-radius:12px;
  border:none;
  background:#fff;
  box-shadow:var(--shadow-1);
  font-weight:700;
  cursor:pointer;
}
.btn-primary{
  background:var(--accent);
  color:#fff;
}
.btn-ghost{
  background:transparent;
  border:1px solid #00000014;
}
.input{
  padding:12px 14px;
  border-radius:12px;
  border:1px solid #0000001f;
  background:#ffffffcc;
  backdrop-filter:blur(4px);
}
.tag{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 10px;
  background:#fff;
  border:1px solid #eceff2;
  border-radius:999px;
  font-weight:700;
  box-shadow:var(--shadow-1);
}
.kbd{
  font-family:ui-monospace,Menlo,Consolas,monospace;
  font-size:12px;
  padding:4px 6px;
  border-radius:8px;
  background:#00000010;
}
.grid-2{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:12px;
}
.grid-3{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:12px;
}
.grid-auto{
  display:grid;
  grid-auto-flow:column;
  grid-auto-columns:max-content;
  gap:10px;
}
.marquee{
  overflow:hidden;
  white-space:nowrap;
}
.marquee span{
  display:inline-block;
  padding-left:100%;
  animation:mar 12s linear infinite;
}
@keyframes mar{
  to{
    transform:translateX(-100%);
  }
}
.badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 10px;
  background:#fff;
  border:1px solid #eceff2;
  border-radius:999px;
  font-weight:700;
}
.alert{
  padding:12px 14px;
  background:#fff7e6;
  color:#7a4d00;
  border:1px solid #ffe2a6;
  border-radius:12px;
}
.progress{
  width:100%;
  height:6px;
  background:#00000010;
  border-radius:999px;
  overflow:hidden;
}
.progress>span{
  display:block;
  height:100%;
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  width:0%;
}
.table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  border-radius:12px;
  overflow:hidden;
}
.table thead th{
  text-align:left;
  font-weight:800;
  font-size:12px;
  background:#fafbfc;
  padding:10px 12px;
}
.table tbody td{
  padding:10px 12px;
  border-top:1px solid #eceff2;
}
.tooltip{
  position:absolute;
  inset:auto auto auto auto;
  pointer-events:none;
  background:#111;
  color:#fff;
  padding:6px 8px;
  border-radius:8px;
  font-size:12px;
  opacity:0;
  transform:translateY(4px);
  transition:opacity .15s ease,transform .15s ease;
}
.has-tooltip:hover .tooltip,
.has-tooltip:focus-within .tooltip{
  opacity:1;
  transform:translateY(0);
}
.switch{
  --sw:38px;
  --sh:22px;
  --kn:18px;
  position:relative;
  width:var(--sw);
  height:var(--sh);
  border-radius:999px;
  background:#e8e9ee;
  transition:background .2s ease;
}
.switch input{
  position:absolute;
  inset:0;
  opacity:0;
}
.switch i{
  position:absolute;
  top:50%;
  left:2px;
  width:var(--kn);
  height:var(--kn);
  transform:translateY(-50%);
  background:#fff;
  border-radius:999px;
  box-shadow:var(--shadow-1);
  transition:left .2s ease;
}
.switch input:checked + i{
  left:calc(var(--sw) - var(--kn) - 2px);
}
.switch input:checked ~ .switch{
  background:var(--accent);
}
.card-ghost{
  background:#ffffffaa;
  backdrop-filter:blur(8px);
  border:1px solid #ffffff44;
  border-radius:16px;
  padding:14px;
}
.ribbon{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 12px;
  background:#fff;
  border-radius:999px;
  box-shadow:var(--shadow-2);
}
.pill{
  padding:8px 12px;
  border-radius:999px;
  background:#fafbfc;
  border:1px solid #eceff2;
}
.icon{
  width:18px;
  height:18px;
  display:inline-block;
}
.hr{
  height:1px;
  width:100%;
  background:#eceff2;
}
.shadow-plate{
  filter:drop-shadow(0 16px 20px rgba(0,0,0,.06));
}
.blur-2{
  backdrop-filter:blur(12px);
}
.rounded-xs{border-radius:var(--radius-xs)}
.rounded-sm{border-radius:var(--radius-sm)}
.rounded-md{border-radius:var(--radius-md)}
.rounded-lg{border-radius:var(--radius-lg)}
.rounded-xl{border-radius:var(--radius-xl)}
.rounded-2xl{border-radius:var(--radius-2xl)}
.mt-0{margin-top:0}
.mt-4{margin-top:4px}
.mt-6{margin-top:6px}
.mt-8{margin-top:8px}
.mt-10{margin-top:10px}
.mt-12{margin-top:12px}
.mt-16{margin-top:16px}
.mb-0{margin-bottom:0}
.mb-4{margin-bottom:4px}
.mb-6{margin-bottom:6px}
.mb-8{margin-bottom:8px}
.mb-10{margin-bottom:10px}
.mb-12{margin-bottom:12px}
.mb-16{margin-bottom:16px}
.text-xs{font-size:12px}
.text-sm{font-size:13px}
.text-md{font-size:14px}
.text-lg{font-size:16px}
.text-xl{font-size:18px}
.text-2xl{font-size:20px}
.text-3xl{font-size:24px}
.bold{font-weight:800}
.semibold{font-weight:700}
.normal{font-weight:500}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace}
.upper{text-transform:uppercase}
.center{text-align:center}
.right{text-align:right}
.left{text-align:left}
.hidden{display:none}
.block{display:block}
.inline{display:inline}
.inline-block{display:inline-block}
.grid{
  display:grid;
}
.grid-flow-col{
  grid-auto-flow:column;
}
.gap-4{gap:4px}
.gap-6{gap:6px}
.gap-8{gap:8px}
.gap-10{gap:10px}
.gap-12{gap:12px}
.p-6{padding:6px}
.p-8{padding:8px}
.p-10{padding:10px}
.p-12{padding:12px}
.p-14{padding:14px}
.p-16{padding:16px}
.round{
  border-radius:999px;
}
.border{
  border:1px solid #eceff2;
}
.bg-white{
  background:#fff;
}
.bg-muted{
  background:#fafbfc;
}
.bg-accent{
  background:var(--accent);
}
.text-white{
  color:#fff;
}
.text-accent{
  color:var(--accent);
}
@media (max-width:1100px){
  .toolbar-tray{
    grid-template-columns:1fr;
    row-gap:8px;
    border-radius:18px;
    padding:10px;
  }
  .tray-left,
  .tray-center,
  .tray-right{
    justify-content:center;
    flex-wrap:wrap;
  }
}
@media (max-width:820px){
  .controls{
    left:8px;
    right:auto;
    max-width:min(96vw,1100px);
  }
  .row input[type="range"]{
    width:140px;
  }
}
@media (max-width:640px){
  .cake-svg{
    width:clamp(236px,74vw,520px);
  }
  .toolbar{
    top:6px;
    left:6px;
    right:6px;
  }
  .toolbar button,
  .toolbar select{
    padding:8px 12px;
  }
  .row input[type="range"]{
    width:120px;
  }
}
@media (max-width:420px){
  .row{
    gap:6px;
    padding:6px 8px;
  }
  .row input[type="range"]{
    width:100px;
  }
  .name-form input{
    min-width:min(82vw,360px);
  }
}
@media (prefers-reduced-motion:reduce){
  *,
  *::before,
  *::after{
    animation:none !important;
    transition:none !important;
    scroll-behavior:auto !important;
  }
}

.controls--slim .row input[type="range"]::-webkit-slider-runnable-track{
  height:8px; border-radius:999px; background:#2a2b2f; box-shadow:inset 0 1px 0 #0001;
}
.controls--slim .row input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none; width:20px; height:20px; border-radius:50%;
  background:#6dd13f; border:3px solid #e8f9de; margin-top:-6px; box-shadow:0 2px 6px rgba(0,0,0,.18);
}

.controls--slim .row input[type="range"]::-moz-range-track{
  height:8px; border-radius:999px; background:#2a2b2f; box-shadow:inset 0 1px 0 #0001;
}
.controls--slim .row input[type="range"]::-moz-range-thumb{
  width:20px; height:20px; border-radius:50%;
  background:#6dd13f; border:3px solid #e8f9de; box-shadow:0 2px 6px rgba(0,0,0,.18);
}

/* === SOL SÜTUN: DİKEY (ALT ALTA) PANEL === */
.controls.controls--left{
  position:fixed;
  top:calc(var(--toolbar-h) + 10px);
  left:12px;
  z-index:20;

  display:flex;
  flex-direction:column;     
  gap:10px;

  width:280px;              
  max-height:calc(100dvh - var(--toolbar-h) - 22px);
  padding:12px;
  background:#f3f4f6ee;
  border:1px solid #e6e9f0;
  border-radius:14px;
  box-shadow:0 10px 24px rgba(0,0,0,.10);
  overflow:auto;
  -webkit-overflow-scrolling:touch;
}

.controls--left .ctrl-title{
  font-weight:900;
  font-size:16px;
  padding:10px 12px;
  background:#fff;
  border:1px solid #eceff2;
  border-radius:10px;
  box-shadow:0 1px 0 rgba(0,0,0,.06);
}

.controls--left .grid{
  display:flex;
  flex-direction:column;
  gap:10px;
  padding:0;
  margin:0;
}

.controls--left .row{
  display:grid;
  grid-template-columns: 1fr auto;     
  align-items:center;
  gap:10px;
  padding:10px 12px;
  background:#fff;
  border:1px solid #eceff2;
  border-radius:12px;
  box-shadow:0 1px 0 rgba(0,0,0,.06);
}

.controls--left .row label{
  font-weight:800;
  font-size:13px;
}

.controls--left .ctrl-val{
  justify-self:end;
  font-weight:800;
  font-variant-numeric:tabular-nums;
}

.controls--left .row input[type="range"]{
  grid-column:1 / -1;       
  width:100%;
  height:22px;
  appearance:none;
  -webkit-appearance:none;
  -moz-appearance:none;
  background:transparent;
}

.controls--left .row input[type="range"]::-webkit-slider-runnable-track{
  height:8px; border-radius:999px; background:#2a2b2f; box-shadow:inset 0 1px 0 #0001;
}
.controls--left .row input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none; width:20px; height:20px; border-radius:50%;
  background:#6dd13f; border:3px solid #e8f9de; margin-top:-6px; box-shadow:0 2px 6px rgba(0,0,0,.18);
}
.controls--left .row input[type="range"]::-moz-range-track{
  height:8px; border-radius:999px; background:#2a2b2f; box-shadow:inset 0 1px 0 #0001;
}
.controls--left .row input[type="range"]::-moz-range-thumb{
  width:20px; height:20px; border-radius:50%;
  background:#6dd13f; border:3px solid #e8f9de; box-shadow:0 2px 6px rgba(0,0,0,.18);
}

.controls--left .row.colors{
  grid-template-columns: 1fr;
  background:#fff; border:1px solid #eceff2;
}
.controls--left .row.colors label{
  margin-bottom:6px;
  background:#fafbfc; border:1px solid #eceff2;
  padding:6px 10px; border-radius:10px;
}
.controls--left .row.colors input[type="color"]{
  width:44px; height:34px; border:none; border-radius:10px; background:#fff;
  box-shadow:0 2px 0 rgba(0,0,0,.06), inset 0 0 0 1px #e7eaf0;
  margin-right:6px;
}

.controls--left .actions{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
  margin-top:2px;
}
.controls--left .actions #randBtn,
.controls--left .actions #resetBtn{
  width:100%;
  padding:10px 12px;
  border-radius:12px;
  font-weight:800;
  border:none;
  box-shadow:0 1px 0 rgba(0,0,0,.06);
}
.controls--left .actions #randBtn{ background:#eaf3ff }
.controls--left .actions #resetBtn{ background:#ffecef }

@media (max-width:860px){
  .controls.controls--left{
    left:8px; right:8px; width:auto;
    flex-direction:row;
    max-width:unset; max-height:none;
    overflow:visible;
  }
  .controls--left .grid{
    flex-direction:row;
    overflow-x:auto;
  }
  .controls--left .row{ width:280px }
}

/* ===================== SOL PANELİ TOOLBAR İLE EŞLE (THEME MATCH) ===================== */

.controls.controls--left{
  background:#fff;                      
  border:1px solid #eceff2;             
  border-radius:18px;                   
  box-shadow:var(--shadow-1);
  color:var(--text);                    
  width:300px;                          
  padding:10px 12px;
  gap:12px;
}

.controls--left .controls-header{
  background:#fff;
  border:1px solid #eceff2;
  border-radius:999px;
  padding:8px 12px;
  box-shadow:var(--shadow-1);
}
.controls--left #controlsTitle{
  font-weight:900;
  font-size:15px;
  color:var(--text);
}
.controls--left #collapseBtn{
  background:#f6f7fb;
  border:1px solid #eceff2;
  border-radius:999px;
  padding:6px 10px;
  font-weight:800;
  color:var(--text);
}

.controls--left .grid{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin:0;
  padding:0;
  overflow:visible;
}

/* ==== DROPDOWN PASTA AYARLARI (SOL PANELİ EZER) ==== */
#controls.controls--dropdown{
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  top: calc(var(--toolbar-h) + 10px);
  width: min(96vw, 1100px);
  z-index: 28;

  background: #fff;
  border: 1px solid #eceff2;
  border-radius: 18px;
  box-shadow: var(--shadow-1);
  color: var(--text);

  max-height: 0;
  opacity: 0;
  padding: 0;
  overflow: clip;
  pointer-events: none;
  transition: max-height .35s ease, opacity .25s ease, padding .25s ease;
}

#controls.controls--dropdown.open{
  max-height: 70vh;          
  opacity: 1;
  padding: 10px 12px;
  overflow: auto;
  pointer-events: auto;
}

#controls.controls--dropdown .grid{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin: 10px 0 0 0;
  padding: 0;
  overflow: visible;
}
@media (max-width: 680px){
  #controls.controls--dropdown .grid{
    grid-template-columns: 1fr;
  }
}

#controls.controls--dropdown .row{
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: #fafbfc;
  border: 1px solid #eceff2;
  border-radius: 12px;
  box-shadow: 0 1px 0 rgba(0,0,0,.06);
}
#controls.controls--dropdown .row input[type="range"]{
  grid-column: 1 / -1;
  width: 100%;
}

#controls.controls--dropdown .row.colors{
  grid-template-columns: 1fr;
  background: transparent;
  border: none;
  box-shadow: none;
}
#controls.controls--dropdown .row.colors label{
  background:#fafbfc;
  border:1px solid #eceff2;
  padding:6px 10px;
  border-radius:10px;
}

#controls.controls--dropdown .controls-header{
  display:flex;
  align-items:center;
  gap:8px;
  background:#fff;
  border:1px solid #eceff2;
  border-radius:999px;
  padding:8px 12px;
  box-shadow:var(--shadow-1);
}

#controls.controls--dropdown .actions{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-top: 10px;
}
#controls.controls--dropdown .actions button{
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  font-weight: 800;
}

body.celebrating #controls.controls--dropdown{ display: none; }

@media (max-width: 860px){
  #controls.controls--dropdown{
    left: 8px; right: 8px; transform: none; width: auto;
  }
}
#controls {
  display: none;
}
#controls.open {
  display: block;
}
